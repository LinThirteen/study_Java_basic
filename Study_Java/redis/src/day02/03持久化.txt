

Redis 持久化

redis提供了两种持久化方式
	1.RDB
		在指定的时间间隔内将内存中的数据集快照写入磁盘，也就是
		行话讲的snapshot快照，他恢复的是将快照文件直接
		读到内存里
		
		如何触发持久化：
			1.满足触发策略
			2.正常关闭redis
				>shutdown
				
		
	2.AOF
		以日志的形式来记录每个写操作，将Redis执行过的所有写指
		令记录下来(读操作不记录)，只许追加文件但不可以改写文件，
		Redis启动之初会读取该文件重新构建数据，换言之，Redis重启的
		话就根据日志文件的内容将写指令从前到后执行一次以完成数据的恢复工作。
		
		优点：
			备份机制更稳健，丢失数据概率低
			可读的日志文件，通过操作AOF稳健，可以处理误操作
		
		
		缺点：
		比起RDB占用更多的磁盘空间
		恢复备份速度慢
		每次读写都要同步的话，会有一定的性能压力
		存在个别bug，造成恢复不能
	

redis中的备份是如何执行的？
	Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时文件中，
	待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程
	是不进行任何IO操作的，这就确保了极高的性能如果需要进行大规模数据的恢复，且对于数据
	恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。RDB的缺点是最后一次持
	久化后的数据可能丢失。




























